Backport of:

From 5982632109cad48bc6dab867298fdea4dea57c51 Mon Sep 17 00:00:00 2001
From: Cristy <urban-warrior@imagemagick.org>
Date: Sun, 23 Jun 2019 11:47:36 -0400
Subject: [PATCH] https://github.com/ImageMagick/ImageMagick/issues/1616

---
 wand/mogrify.c | 3 +++
 1 file changed, 3 insertions(+)

--- a/wand/mogrify.c
+++ b/wand/mogrify.c
@@ -7946,6 +7946,8 @@ WandExport MagickBooleanType MogrifyImag
               channel,metric,&distortion,exception);
             if (difference_image == (Image *) NULL)
               break;
+            reconstruct_image=DestroyImage(reconstruct_image);
+            image=DestroyImage(image);
             if (*images != (Image *) NULL)
               *images=DestroyImage(*images);
             *images=difference_image;
@@ -8288,6 +8290,7 @@ WandExport MagickBooleanType MogrifyImag
                    q=GetImageFromList(*images,index-1);
                    if (q == (Image *) NULL)
                      {
+                       p=DestroyImage(p);
                        (void) ThrowMagickException(exception,GetMagickModule(),
                          OptionError,"NoSuchImage","`%s'",argv[i+1]);
                        status=MagickFalse;

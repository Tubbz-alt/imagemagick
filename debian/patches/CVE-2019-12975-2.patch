From b9c3aa197020ca091a21145cf46855afd4ddcb07 Mon Sep 17 00:00:00 2001
From: Cristy <mikayla-grace@urban-warrior.org>
Date: Sat, 30 Mar 2019 08:46:12 -0400
Subject: [PATCH] https://github.com/ImageMagick/ImageMagick/issues/1517

---
 coders/dpx.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

--- a/coders/dpx.c
+++ b/coders/dpx.c
@@ -2043,8 +2043,10 @@ static MagickBooleanType WriteDPXImage(c
       break;
     length=ExportQuantumPixels(image,(const CacheView *) NULL,quantum_info,
       quantum_type,pixels,&image->exception);
+    if (length == 0)
+      break;
     count=WriteBlob(image,extent,pixels);
-    if (count != (ssize_t) length)
+    if (count != (ssize_t) extent)
       break;
     status=SetImageProgress(image,SaveImageTag,(MagickOffsetType) y,
       image->rows);

Backport of:

From 3c53413eb544cc567309b4c86485eae43e956112 Mon Sep 17 00:00:00 2001
From: Cristy <mikayla-grace@urban-warrior.org>
Date: Sun, 28 Apr 2019 09:26:45 -0400
Subject: [PATCH] https://github.com/ImageMagick/ImageMagick/issues/1560

---
 coders/tiff.c | 10 ++++++----
 1 file changed, 6 insertions(+), 4 deletions(-)

Index: imagemagick-6.9.10.23+dfsg/coders/tiff.c
===================================================================
--- imagemagick-6.9.10.23+dfsg.orig/coders/tiff.c	2019-06-12 13:45:41.739868265 -0400
+++ imagemagick-6.9.10.23+dfsg/coders/tiff.c	2019-06-12 13:47:13.048224465 -0400
@@ -4053,13 +4053,15 @@ RestoreMSCWarning
     if (image->colorspace == LabColorspace)
       DecodeLabImage(image,&image->exception);
     DestroyTIFFInfo(&tiff_info);
-    if (exception->severity > ErrorException)
-      break;
 DisableMSCWarning(4127)
     if (0 && (image_info->verbose != MagickFalse))
 RestoreMSCWarning
       TIFFPrintDirectory(tiff,stdout,MagickFalse);
-    (void) TIFFWriteDirectory(tiff);
+    if (TIFFWriteDirectory(tiff) == 0)
+      {
+        status=MagickFalse;
+        break;
+      }
     image=SyncNextImageInList(image);
     if (image == (Image *) NULL)
       break;
@@ -4068,6 +4070,6 @@ RestoreMSCWarning
       break;
   } while (image_info->adjoin != MagickFalse);
   TIFFClose(tiff);
-  return(exception->severity > ErrorException ? MagickFalse : MagickTrue);
+  return(status);
 }
 #endif
